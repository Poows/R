---
title: "Лабораторная работа 5"
author: "Акименков Александр"
date: "19.04.2021"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Вариант - 2

Задача:

Создать .Rmd скрипт, который генерирует html-отчёт с двумя картами:

1. Картограмма с таблицей стран мира по показателю из базы Всемирного банка (интерактивная картограмма из примера).

2. Карта с маркерами или с радиусами, построенная по набору данных с Портала открытых данных РФ.

Данные для карт можно загружать из своего репозитория на github.com. Код загрузки данных  с  помощью  API  предоставлять  необязательно,  но  если  выкладываете  его  на github.com,  не  забудьте  заново  сгенерировать  ключи  API,  чтобы  никто  не  мог воспользоваться вашим логином.

Распределение баллов за упражнение:

* есть первая карта: 4 балла;
* есть вторая карта (метки на карте содержат всплывающие подсказки с информацией об объектах): 4 балла;
* html-страница с картами содержит дату создания документа и размещена на RPubs или github.io: 3 балла.

Чтобы  разместить  на githubотображаемую  веб-страницу,  необходимо  создать репозиторий имя_пользователя.gothub.io(где имя_пользователя –ваш логин на github) и разместить в нём html-документ для отображения. Страница будет доступна по адресу https://имя_пользователя.github.io. Подробнее: https://pages.github.com/.

Вариант:

WDI: любой показатель из раздела "Aid Effectiveness" (Эффективность госпомощи). Портал открытых данных: Портал открытых данных: Объекты культурного наследия на территории Костромской области (id: 4401168294-oknkosobl), взять только расположенные в посёлке Вохма.

Заболеваемость туберкулезом (на 100 000 человек)


```{r, results='asis', cache=TRUE, warning=F, message=F}
library(leaflet)

fileURL <-'./data/marker.png'
pharm.icon <- makeIcon(iconUrl = fileURL,
                      iconWidth = 31,
                      iconHeight = 31,
                      iconAnchorX = 31,
                      iconAnchorY = 31)

fileURL <- './data/dataRF.csv'
doc <- read.csv2(fileURL, stringsAsFactors = F)

doc$lat <- as.numeric(doc$lat)
doc$long <- as.numeric(doc$long)

# Подпись к объектам
map.sites <- paste0(doc$name)

# Создаем виджет с картой
myMap <- doc %>% leaflet(width =800, height =800) %>%
  addTiles() %>% addMarkers(icon = pharm.icon, popup = map.sites)

myMap
```